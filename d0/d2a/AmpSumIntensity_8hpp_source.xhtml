<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ComPWA: Physics/AmplitudeSum/AmpSumIntensity.hpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ComPWA</div>
   <div id="projectbrief">Common Partial-Wave-Analysis Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.xhtml"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.xhtml"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.xhtml"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.xhtml"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.xhtml"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.xhtml"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">Physics/AmplitudeSum/AmpSumIntensity.hpp</div>  </div>
</div>
<div class="contents">
<a href="../../d0/d2a/AmpSumIntensity_8hpp.xhtml">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//-------------------------------------------------------------------------------</span>
<a name="l00002"></a>00002 <span class="comment">// Copyright (c) 2013 Mathias Michel.</span>
<a name="l00003"></a>00003 <span class="comment">// All rights reserved. This program and the accompanying materials</span>
<a name="l00004"></a>00004 <span class="comment">// are made available under the terms of the GNU Public License v3.0</span>
<a name="l00005"></a>00005 <span class="comment">// which accompanies this distribution, and is available at</span>
<a name="l00006"></a>00006 <span class="comment">// http://www.gnu.org/licenses/gpl.html</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// Contributors:</span>
<a name="l00009"></a>00009 <span class="comment">//     Mathias Michel - initial API and implementation</span>
<a name="l00010"></a>00010 <span class="comment">//-------------------------------------------------------------------------------</span>
<a name="l00011"></a>00011 <span class="comment">//****************************************************************************</span>
<a name="l00012"></a>00012 <span class="comment">// Wrapper to provide intensity of amplitude sum</span>
<a name="l00013"></a>00013 <span class="comment">//****************************************************************************</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="preprocessor">#ifndef _AMPSUMINTENSITY_HPP</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">#define _AMPSUMINTENSITY_HPP</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;memory&gt;</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;RooRealVar.h&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;RooFormulaVar.h&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;RooPlot.h&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;RooCmdArg.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;RooMsgService.h&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;RooGlobalFunc.h&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;RooCFunction1Binding.h&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;RooGaussian.h&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;RooAddPdf.h&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;RooDataSet.h&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;RooDataHist.h&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;RooFitResult.h&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;RooComplex.h&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;RooAbsReal.h&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;RooAbsArg.h&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;RooRealProxy.h&quot;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/de3/Amplitude_8hpp.xhtml" title="This class provides the interface to the model which tries to describe the intensity.">Physics/Amplitude.hpp</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="../../db/dce/Parameter_8hpp.xhtml" title="This class implements some internal container of parameters.">Core/Parameter.hpp</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d9f/ParameterList_8hpp.xhtml" title="This class provides a list of fit parameters which can have different types.">Core/ParameterList.hpp</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d66/Functions_8hpp.xhtml" title="This file contains Functions implementing the Strategy interface so they can be used inside a node of...">Core/Functions.hpp</a>&quot;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d27/AmplitudeSetup_8hpp.xhtml" title="XML config parser for Amplitude Setup.">Physics/AmplitudeSum/AmplitudeSetup.hpp</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d45/AmpRelBreitWignerRes_8hpp.xhtml">Physics/AmplitudeSum/AmpRelBreitWignerRes.hpp</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d8c/AmpGausRes_8hpp.xhtml">Physics/AmplitudeSum/AmpGausRes.hpp</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d65/AmpFlatteRes_8hpp.xhtml">Physics/AmplitudeSum/AmpFlatteRes.hpp</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d12/AmpWigner_8hpp.xhtml">Physics/AmplitudeSum/AmpWigner.hpp</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d9e/AmpSumOfAmplitudes_8hpp.xhtml">Physics/AmplitudeSum/AmpSumOfAmplitudes.hpp</a>&quot;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml">00050</a> <span class="keyword">class </span><a class="code" href="../../d9/dec/classAmpSum.xhtml">AmpSum</a> {
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="keyword">public</span>:
<a name="l00054"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a743e6766c6947528ffcca61872fe47f2">00054</a>   <a class="code" href="../../d9/dec/classAmpSum.xhtml#a743e6766c6947528ffcca61872fe47f2" title="Default Constructor (0x0)">AmpSum</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> inM, <span class="keyword">const</span> <span class="keywordtype">double</span> inBr, <span class="keyword">const</span> <span class="keywordtype">double</span> in1
<a name="l00055"></a>00055       ,<span class="keyword">const</span> <span class="keywordtype">double</span> in2, <span class="keyword">const</span> <span class="keywordtype">double</span> in3, <a class="code" href="../../dc/d3a/classAmplitudeSetup.xhtml" title="This class is used to load an Amplitude configuration provided in an XML file.">AmplitudeSetup</a> ini)
<a name="l00056"></a>00056   : <a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>(inM), <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ca73c35b84407835f08779332388c8a">Br</a>(inBr), <a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>(in1), <a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>(in2), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>(in3),<a class="code" href="../../d9/dec/classAmpSum.xhtml#aa04a0555c52f0f5230307eab8b8a85cd">PI</a>(3.14159),
<a name="l00057"></a>00057     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a8e2d39295bcb3225f4e27dae068832f1">m23_sq_min</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)),
<a name="l00058"></a>00058     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a4e37da7be3e40946ec43793b769c2932">m23_sq_max</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>)*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>)),
<a name="l00059"></a>00059     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a729413d51b6a39f106e4e7b455f5f5a9">m13_sq_min</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)),
<a name="l00060"></a>00060     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a6074abf0ecc4479700c093aa5e0a06f0">m13_sq_max</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>)*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>)),
<a name="l00061"></a>00061     <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad26634c8073119ecb51e23a976857b1d">m12_sq_min</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>)*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>)),
<a name="l00062"></a>00062     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a603b7171b1b9bfb44ee2d59e4f3d81ec">m12_sq_max</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)),
<a name="l00063"></a>00063     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a537173084f103cdb461e4894f8ef44e0">m23_min</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab1aad32293f9b050787a25cf32e99f2c">m23_max</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>)),
<a name="l00064"></a>00064     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5a70a284f6076dff666178e1d83f8e29">m13_min</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)), <a class="code" href="../../d9/dec/classAmpSum.xhtml#a7dc8139ae6ce82f828132fd123fa81b1">m13_max</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>)),
<a name="l00065"></a>00065     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a240871c8a89229621dfd2a471afd6ba6">m12_min</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>)), <a class="code" href="../../d9/dec/classAmpSum.xhtml#a9074793a552a714613ee9c5758595364">m12_max</a>((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)),
<a name="l00066"></a>00066     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a689ab4ec3dbbb34fc945d35a09e5005b">ma</a>(<span class="stringliteral">&quot;ma&quot;</span>, <span class="stringliteral">&quot;mass&quot;</span>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a537173084f103cdb461e4894f8ef44e0">m23_min</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab1aad32293f9b050787a25cf32e99f2c">m23_max</a>),
<a name="l00067"></a>00067     <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8cd5dee4d6f9a07fc99cafd6ab21ef1">mb</a>(<span class="stringliteral">&quot;mb&quot;</span>, <span class="stringliteral">&quot;mass&quot;</span>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5a70a284f6076dff666178e1d83f8e29">m13_min</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a7dc8139ae6ce82f828132fd123fa81b1">m13_max</a>),
<a name="l00068"></a>00068     <a class="code" href="../../d9/dec/classAmpSum.xhtml#afdf567b134209e8a779eb9ff26f6f356">mc</a>(<span class="stringliteral">&quot;mc&quot;</span>, <span class="stringliteral">&quot;mass&quot;</span>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a240871c8a89229621dfd2a471afd6ba6">m12_min</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a9074793a552a714613ee9c5758595364">m12_max</a>),
<a name="l00069"></a>00069     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a1799802d60c67ce209351878c14a659a">totAmp</a>(<span class="stringliteral">&quot;relBWsumAmplitude&quot;</span>, <span class="stringliteral">&quot;totAmp&quot;</span>){
<a name="l00070"></a>00070 
<a name="l00071"></a>00071     <span class="comment">//AmpSumOfAmplitudes totAmp23(&quot;rbwAmp23&quot;, &quot;totAmp&quot;);</span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="comment">//unsigned int numReso = ini.getResonances().size();</span>
<a name="l00075"></a>00075     <span class="keywordflow">for</span>(std::vector&lt;Resonance&gt;::iterator reso=ini.<a class="code" href="../../dc/d3a/classAmplitudeSetup.xhtml#a75045bb7b79b7b315069e6f0267873a4">getResonances</a>().begin(); reso!=ini.<a class="code" href="../../dc/d3a/classAmplitudeSetup.xhtml#a75045bb7b79b7b315069e6f0267873a4">getResonances</a>().end(); reso++){
<a name="l00076"></a>00076       <a class="code" href="../../d6/d5b/structResonance.xhtml">Resonance</a> tmp = (*reso);
<a name="l00077"></a>00077       <span class="comment">//setup RooVars</span>
<a name="l00078"></a>00078       <a class="code" href="../../d9/dec/classAmpSum.xhtml#aa82d04a79a1686e8d7ea6c2b1151be61">mr</a>.push_back( std::shared_ptr&lt;RooRealVar&gt; (<span class="keyword">new</span> RooRealVar((<span class="stringliteral">&quot;m_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), <span class="stringliteral">&quot;resMass&quot;</span>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#ab9de5ccd6d828375f6619356f188bdbf">m_mass</a>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#ae58216b62a7b73ee275c228dc168d8e6">m_mass_min</a>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a10b762dd6be3a75ef2dbc7db8ce0df82">m_mass_max</a>) ) );
<a name="l00079"></a>00079       <a class="code" href="../../d9/dec/classAmpSum.xhtml#a0e413d110807856d1cffac48bb5ecc0d">qr</a>.push_back( std::shared_ptr&lt;RooRealVar&gt; (<span class="keyword">new</span> RooRealVar((<span class="stringliteral">&quot;q_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), <span class="stringliteral">&quot;breakupMom&quot;</span>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#ac429a425cd63073c04f3ed783df31a46">m_breakup_mom</a>) ) );
<a name="l00080"></a>00080       <a class="code" href="../../d9/dec/classAmpSum.xhtml#a406bd19091e9931c444e1bedf9d80d00">gr</a>.push_back( std::shared_ptr&lt;RooRealVar&gt; (<span class="keyword">new</span> RooRealVar((<span class="stringliteral">&quot;g_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), <span class="stringliteral">&quot;resWidth&quot;</span>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a6a164223523da9b82f05dfe412bf7d85">m_width</a>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a96cd124336b15b78a2da80667f754c16">m_width_min</a>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#aae6f37d58ee8ea168b28fff6db5065ff">m_width_max</a>) ) );
<a name="l00081"></a>00081       <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>.push_back( std::shared_ptr&lt;RooRealVar&gt; (<span class="keyword">new</span> RooRealVar((<span class="stringliteral">&quot;r_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), <span class="stringliteral">&quot;amplitude&quot;</span>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a924fdc23c262d0536bb1c0aafcf167d9">m_strength</a>) ) );
<a name="l00082"></a>00082       <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>.push_back( std::shared_ptr&lt;RooRealVar&gt; (<span class="keyword">new</span> RooRealVar((<span class="stringliteral">&quot;phi_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), <span class="stringliteral">&quot;phase&quot;</span>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a9979c547069b4a452c276a63da896a72">m_phase</a>) ) );
<a name="l00083"></a>00083 
<a name="l00084"></a>00084       <a class="code" href="../../d9/dec/classAmpSum.xhtml#a73a8ae0c015eff93d6884db24ad63323">aj</a>.push_back( std::shared_ptr&lt;RooRealVar&gt; (<span class="keyword">new</span> RooRealVar((<span class="stringliteral">&quot;j_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), <span class="stringliteral">&quot;j&quot;</span>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a00abdd3572d15ba4474a1c31c1dc96ef">m_spin</a>) ) );
<a name="l00085"></a>00085       <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ee5deb0219b9cc30901f39462cd2285">am</a>.push_back( std::shared_ptr&lt;RooRealVar&gt; (<span class="keyword">new</span> RooRealVar((<span class="stringliteral">&quot;m_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), <span class="stringliteral">&quot;m&quot;</span>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#ab9adb4ca4e03de9163a175be1c322685">m_m</a>) ) );
<a name="l00086"></a>00086       <a class="code" href="../../d9/dec/classAmpSum.xhtml#a9d38e42320601601cad6ea07c3a3904a">an</a>.push_back( std::shared_ptr&lt;RooRealVar&gt; (<span class="keyword">new</span> RooRealVar((<span class="stringliteral">&quot;n_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), <span class="stringliteral">&quot;n&quot;</span>, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a6fddfde0c0200d51fd25496d17beb44d">m_n</a>) ) );
<a name="l00087"></a>00087 
<a name="l00088"></a>00088       <span class="comment">//setup Dynamics and Angular Distribution</span>
<a name="l00089"></a>00089       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> last = <a class="code" href="../../d9/dec/classAmpSum.xhtml#aa82d04a79a1686e8d7ea6c2b1151be61">mr</a>.size()-1;
<a name="l00090"></a>00090       <span class="keywordflow">if</span>(tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a375c70fee829f4e5dd3a6ab9f266e7aa">m_daugtherA</a>==2 &amp;&amp; tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#ab5f5db09dd23c0e2bf1af0f8bcef96b2">m_daugtherB</a>==3){
<a name="l00091"></a>00091         std::shared_ptr&lt;AmpRelBreitWignerRes&gt; tmpbw(<span class="keyword">new</span> <a class="code" href="../../d5/dcf/classAmpRelBreitWignerRes.xhtml">AmpRelBreitWignerRes</a>(tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>.c_str(),
<a name="l00092"></a>00092             tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>.c_str(), <a class="code" href="../../d9/dec/classAmpSum.xhtml#a689ab4ec3dbbb34fc945d35a09e5005b">ma</a>, *<a class="code" href="../../d9/dec/classAmpSum.xhtml#aa82d04a79a1686e8d7ea6c2b1151be61">mr</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a406bd19091e9931c444e1bedf9d80d00">gr</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a0e413d110807856d1cffac48bb5ecc0d">qr</a>[last], 1, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a00abdd3572d15ba4474a1c31c1dc96ef">m_spin</a>) );
<a name="l00093"></a>00093         tmpbw-&gt;setDecayMasses(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>);
<a name="l00094"></a>00094         <a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fe113967edc8f1c75a9d10580550c76">rbw</a>.push_back(tmpbw);
<a name="l00095"></a>00095         <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab34a22b8742c7a89bf085eda86ee9d42">angd</a>.push_back( std::shared_ptr&lt;AmpWigner&gt; (<span class="keyword">new</span> <a class="code" href="../../d4/d38/classAmpWigner.xhtml">AmpWigner</a>((<span class="stringliteral">&quot;a_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), (<span class="stringliteral">&quot;a_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(),
<a name="l00096"></a>00096             <a class="code" href="../../d9/dec/classAmpSum.xhtml#afdf567b134209e8a779eb9ff26f6f356">mc</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a689ab4ec3dbbb34fc945d35a09e5005b">ma</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8cd5dee4d6f9a07fc99cafd6ab21ef1">mb</a>, 1, *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a73a8ae0c015eff93d6884db24ad63323">aj</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ee5deb0219b9cc30901f39462cd2285">am</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9d38e42320601601cad6ea07c3a3904a">an</a>[last]) ) );
<a name="l00097"></a>00097         <a class="code" href="../../d9/dec/classAmpSum.xhtml#a1799802d60c67ce209351878c14a659a">totAmp</a>.<a class="code" href="../../dc/d5e/classAmpSumOfAmplitudes.xhtml#aa8957ac86ba69398b06ab58a872f2feb">addBW</a>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fe113967edc8f1c75a9d10580550c76">rbw</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab34a22b8742c7a89bf085eda86ee9d42">angd</a>.at(last));
<a name="l00098"></a>00098       }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a375c70fee829f4e5dd3a6ab9f266e7aa">m_daugtherA</a>==1 &amp;&amp; tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#ab5f5db09dd23c0e2bf1af0f8bcef96b2">m_daugtherB</a>==3){
<a name="l00099"></a>00099         std::shared_ptr&lt;AmpRelBreitWignerRes&gt; tmpbw(<span class="keyword">new</span> <a class="code" href="../../d5/dcf/classAmpRelBreitWignerRes.xhtml">AmpRelBreitWignerRes</a>(tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>.c_str(),
<a name="l00100"></a>00100             tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>.c_str(), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8cd5dee4d6f9a07fc99cafd6ab21ef1">mb</a>, *<a class="code" href="../../d9/dec/classAmpSum.xhtml#aa82d04a79a1686e8d7ea6c2b1151be61">mr</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a406bd19091e9931c444e1bedf9d80d00">gr</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a0e413d110807856d1cffac48bb5ecc0d">qr</a>[last], 2, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a00abdd3572d15ba4474a1c31c1dc96ef">m_spin</a>) );
<a name="l00101"></a>00101         tmpbw-&gt;setDecayMasses(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>);
<a name="l00102"></a>00102         <a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fe113967edc8f1c75a9d10580550c76">rbw</a>.push_back(tmpbw);
<a name="l00103"></a>00103         <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab34a22b8742c7a89bf085eda86ee9d42">angd</a>.push_back( std::shared_ptr&lt;AmpWigner&gt; (<span class="keyword">new</span> <a class="code" href="../../d4/d38/classAmpWigner.xhtml">AmpWigner</a>((<span class="stringliteral">&quot;a_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), (<span class="stringliteral">&quot;a_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(),
<a name="l00104"></a>00104             <a class="code" href="../../d9/dec/classAmpSum.xhtml#afdf567b134209e8a779eb9ff26f6f356">mc</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a689ab4ec3dbbb34fc945d35a09e5005b">ma</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8cd5dee4d6f9a07fc99cafd6ab21ef1">mb</a>, 2, *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a73a8ae0c015eff93d6884db24ad63323">aj</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ee5deb0219b9cc30901f39462cd2285">am</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9d38e42320601601cad6ea07c3a3904a">an</a>[last]) ) );
<a name="l00105"></a>00105         <a class="code" href="../../d9/dec/classAmpSum.xhtml#a1799802d60c67ce209351878c14a659a">totAmp</a>.<a class="code" href="../../dc/d5e/classAmpSumOfAmplitudes.xhtml#aa8957ac86ba69398b06ab58a872f2feb">addBW</a>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fe113967edc8f1c75a9d10580550c76">rbw</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab34a22b8742c7a89bf085eda86ee9d42">angd</a>.at(last));
<a name="l00106"></a>00106       }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a375c70fee829f4e5dd3a6ab9f266e7aa">m_daugtherA</a>==1 &amp;&amp; tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#ab5f5db09dd23c0e2bf1af0f8bcef96b2">m_daugtherB</a>==2){
<a name="l00107"></a>00107         std::shared_ptr&lt;AmpRelBreitWignerRes&gt; tmpbw(<span class="keyword">new</span> <a class="code" href="../../d5/dcf/classAmpRelBreitWignerRes.xhtml">AmpRelBreitWignerRes</a>(tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>.c_str(),
<a name="l00108"></a>00108             tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>.c_str(), <a class="code" href="../../d9/dec/classAmpSum.xhtml#afdf567b134209e8a779eb9ff26f6f356">mc</a>, *<a class="code" href="../../d9/dec/classAmpSum.xhtml#aa82d04a79a1686e8d7ea6c2b1151be61">mr</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a406bd19091e9931c444e1bedf9d80d00">gr</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a0e413d110807856d1cffac48bb5ecc0d">qr</a>[last], 3, tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a00abdd3572d15ba4474a1c31c1dc96ef">m_spin</a>) );
<a name="l00109"></a>00109         tmpbw-&gt;setDecayMasses(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>);
<a name="l00110"></a>00110         <a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fe113967edc8f1c75a9d10580550c76">rbw</a>.push_back(tmpbw);
<a name="l00111"></a>00111         <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab34a22b8742c7a89bf085eda86ee9d42">angd</a>.push_back( std::shared_ptr&lt;AmpWigner&gt; (<span class="keyword">new</span> <a class="code" href="../../d4/d38/classAmpWigner.xhtml">AmpWigner</a>((<span class="stringliteral">&quot;a_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(), (<span class="stringliteral">&quot;a_{&quot;</span>+tmp.<a class="code" href="../../d6/d5b/structResonance.xhtml#a1f8a5834b734d5666dddd144ec8398bc">m_name</a>+<span class="stringliteral">&quot;}&quot;</span>).c_str(),
<a name="l00112"></a>00112             <a class="code" href="../../d9/dec/classAmpSum.xhtml#afdf567b134209e8a779eb9ff26f6f356">mc</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#a689ab4ec3dbbb34fc945d35a09e5005b">ma</a>, <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8cd5dee4d6f9a07fc99cafd6ab21ef1">mb</a>, 3, *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a73a8ae0c015eff93d6884db24ad63323">aj</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ee5deb0219b9cc30901f39462cd2285">am</a>[last], *<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9d38e42320601601cad6ea07c3a3904a">an</a>[last]) ) );
<a name="l00113"></a>00113         <a class="code" href="../../d9/dec/classAmpSum.xhtml#a1799802d60c67ce209351878c14a659a">totAmp</a>.<a class="code" href="../../dc/d5e/classAmpSumOfAmplitudes.xhtml#aa8957ac86ba69398b06ab58a872f2feb">addBW</a>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fe113967edc8f1c75a9d10580550c76">rbw</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>.at(last), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab34a22b8742c7a89bf085eda86ee9d42">angd</a>.at(last));
<a name="l00114"></a>00114       }<span class="keywordflow">else</span>{ <span class="comment">//ignore resonance</span>
<a name="l00115"></a>00115           <span class="comment">//std::cout &lt;&lt; &quot;Problem&quot; &lt;&lt; std::cout;</span>
<a name="l00116"></a>00116           <a class="code" href="../../d9/dec/classAmpSum.xhtml#aa82d04a79a1686e8d7ea6c2b1151be61">mr</a>.pop_back();
<a name="l00117"></a>00117           <a class="code" href="../../d9/dec/classAmpSum.xhtml#a0e413d110807856d1cffac48bb5ecc0d">qr</a>.pop_back();
<a name="l00118"></a>00118           <a class="code" href="../../d9/dec/classAmpSum.xhtml#a406bd19091e9931c444e1bedf9d80d00">gr</a>.pop_back();
<a name="l00119"></a>00119           <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>.pop_back();
<a name="l00120"></a>00120           <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>.pop_back();
<a name="l00121"></a>00121           <a class="code" href="../../d9/dec/classAmpSum.xhtml#a73a8ae0c015eff93d6884db24ad63323">aj</a>.pop_back();
<a name="l00122"></a>00122           <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ee5deb0219b9cc30901f39462cd2285">am</a>.pop_back();
<a name="l00123"></a>00123           <a class="code" href="../../d9/dec/classAmpSum.xhtml#a9d38e42320601601cad6ea07c3a3904a">an</a>.pop_back();
<a name="l00124"></a>00124       }
<a name="l00125"></a>00125 
<a name="l00126"></a>00126       <span class="comment">//rbw.at(last).printName(std::cout);</span>
<a name="l00127"></a>00127       <span class="comment">//angd.at(last).printName(std::cout);</span>
<a name="l00128"></a>00128     }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     std::cout &lt;&lt; <span class="stringliteral">&quot;completed setup&quot;</span> &lt;&lt; std::endl;
<a name="l00131"></a>00131   }
<a name="l00132"></a>00132 
<a name="l00133"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fdade32a104691f580e5678a4d21709">00133</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fdade32a104691f580e5678a4d21709">integral</a>(<a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a>&amp; par){
<a name="l00134"></a>00134     <span class="comment">/*double integral = 1;</span>
<a name="l00135"></a>00135 <span class="comment">    unsigned int nSteps = 1000000;</span>
<a name="l00136"></a>00136 <span class="comment">    double stepa = (ma.getMax()-ma.getMin())/(double)nSteps;</span>
<a name="l00137"></a>00137 <span class="comment">    double stepb = (mb.getMax()-mb.getMin())/(double)nSteps;</span>
<a name="l00138"></a>00138 <span class="comment"></span>
<a name="l00139"></a>00139 <span class="comment">    //TODO: better approximation</span>
<a name="l00140"></a>00140 <span class="comment"></span>
<a name="l00141"></a>00141 <span class="comment">    for(unsigned int k=1; k&lt;nSteps; k++){</span>
<a name="l00142"></a>00142 <span class="comment">      integral += step*intensity((ma.getMin()+k*step), par);</span>
<a name="l00143"></a>00143 <span class="comment">    }*/</span>
<a name="l00144"></a>00144 
<a name="l00145"></a>00145     <span class="keywordflow">return</span> 1;
<a name="l00146"></a>00146     <span class="comment">//return totAmp.getNorm();//integral;</span>
<a name="l00147"></a>00147   }
<a name="l00148"></a>00148 
<a name="l00149"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a668c8acd081839647e06cdcd3f83ed60">00149</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a668c8acd081839647e06cdcd3f83ed60">volume</a>(){
<a name="l00150"></a>00150     <span class="keywordflow">return</span> -1.*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a8e2d39295bcb3225f4e27dae068832f1">m23_sq_min</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a4e37da7be3e40946ec43793b769c2932">m23_sq_max</a>)*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#a729413d51b6a39f106e4e7b455f5f5a9">m13_sq_min</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a6074abf0ecc4479700c093aa5e0a06f0">m13_sq_max</a>)*(<a class="code" href="../../d9/dec/classAmpSum.xhtml#ad26634c8073119ecb51e23a976857b1d">m12_sq_min</a>-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a603b7171b1b9bfb44ee2d59e4f3d81ec">m12_sq_max</a>);
<a name="l00151"></a>00151   }
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a716cdc921b89ab58d99d6a6dbd630d66">00153</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a716cdc921b89ab58d99d6a6dbd630d66">intensity</a>(std::vector&lt;double&gt;&amp; x, <a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a>&amp; par){
<a name="l00154"></a>00154     <span class="comment">//TODO: check x exception</span>
<a name="l00155"></a>00155     <span class="keywordflow">if</span>(x.size()!=3) <span class="keywordflow">return</span> 0;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <a class="code" href="../../d9/dec/classAmpSum.xhtml#a689ab4ec3dbbb34fc945d35a09e5005b">ma</a>.setVal(x[0]); <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8cd5dee4d6f9a07fc99cafd6ab21ef1">mb</a>.setVal(x[1]); <a class="code" href="../../d9/dec/classAmpSum.xhtml#afdf567b134209e8a779eb9ff26f6f356">mc</a>.setVal(x[2]);
<a name="l00158"></a>00158 
<a name="l00159"></a>00159     <span class="keywordflow">if</span>( par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#aa626799b903b16e7f6f29f918c626f9e" title="Getter for number of double parameter.">GetNDouble</a>()&gt;(<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>.size()*2) ){
<a name="l00160"></a>00160         std::cout &lt;&lt; <span class="stringliteral">&quot;Error: Parameterlist doesn&#39;t match model!! &quot;</span> &lt;&lt; par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#aa626799b903b16e7f6f29f918c626f9e" title="Getter for number of double parameter.">GetNDouble</a>() &lt;&lt; std::endl; <span class="comment">//TODO: exception</span>
<a name="l00161"></a>00161       <span class="keywordflow">return</span> 0;
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>.size(); i++){
<a name="l00165"></a>00165       <span class="keywordtype">double</span> im=par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a60d49f17af8b63f4f153f9d420c3bcbb" title="Getter for floating point parameter.">GetDoubleParameter</a>(2*i+1)-&gt;GetValue(), re=par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a60d49f17af8b63f4f153f9d420c3bcbb" title="Getter for floating point parameter.">GetDoubleParameter</a>(2*i)-&gt;GetValue();
<a name="l00166"></a>00166       <span class="keywordflow">if</span>(!par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a60d49f17af8b63f4f153f9d420c3bcbb" title="Getter for floating point parameter.">GetDoubleParameter</a>(2*i)-&gt;IsFixed())
<a name="l00167"></a>00167         <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;setVal(sqrt(re*re+im*im));
<a name="l00168"></a>00168       <span class="keywordflow">if</span>(!par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a60d49f17af8b63f4f153f9d420c3bcbb" title="Getter for floating point parameter.">GetDoubleParameter</a>(2*i+1)-&gt;IsFixed())
<a name="l00169"></a>00169         <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;setVal(atan2(im,re));
<a name="l00170"></a>00170     }
<a name="l00171"></a>00171     <span class="comment">//rr[rr.size()-1]-&gt;setVal(par.GetDoubleParameter(2*(rr.size()-1)).GetValue());</span>
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     <span class="keywordtype">double</span> AMPpdf = <a class="code" href="../../d9/dec/classAmpSum.xhtml#a1799802d60c67ce209351878c14a659a">totAmp</a>.<a class="code" href="../../dc/d5e/classAmpSumOfAmplitudes.xhtml#a9d68707c29548961f66fbfe94d6257ab">evaluate</a>();
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <span class="keywordflow">if</span>(AMPpdf!=AMPpdf){
<a name="l00176"></a>00176         <span class="comment">//std::cout &lt;&lt; &quot;Error: Intensity is not a number!!&quot; &lt;&lt; std::endl; //TODO: exception</span>
<a name="l00177"></a>00177       <span class="keywordflow">return</span> 0;
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="keywordflow">return</span> AMPpdf;
<a name="l00181"></a>00181   }
<a name="l00182"></a>00182 
<a name="l00183"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a6771920ab8e6f01fc34b40ba66bb18c6">00183</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a6771920ab8e6f01fc34b40ba66bb18c6">fillStartParVec</a>(<a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a>&amp; outPar){
<a name="l00184"></a>00184     <span class="keywordflow">if</span>(outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3f27ba4154586dfb2d4c4c30d576219c" title="Getter for number of parameter.">GetNParameter</a>())
<a name="l00185"></a>00185       <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//already filled, TODO: exception?</span>
<a name="l00186"></a>00186 
<a name="l00187"></a>00187     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>.size();i++){
<a name="l00188"></a>00188       <span class="comment">//add strength and phases of the used amplitudes</span>
<a name="l00189"></a>00189 
<a name="l00190"></a>00190       <span class="comment">//outPar.AddParameter(DoubleParameter(rr[i]-&gt;getVal()));</span>
<a name="l00191"></a>00191       <span class="keywordflow">if</span>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;hasError()) <span class="comment">//TODO: check bounds</span>
<a name="l00192"></a>00192         outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3574caceee6e2701f25327d35f7bce40" title="Add parameter via abstract pointer.">AddParameter</a>(std::shared_ptr&lt;DoubleParameter&gt;(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;GetName(),<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;getVal()*cos(<a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;getVal()), <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;getMin(), <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;getMax(), <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;getError())));
<a name="l00193"></a>00193       <span class="keywordflow">else</span>
<a name="l00194"></a>00194         outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3574caceee6e2701f25327d35f7bce40" title="Add parameter via abstract pointer.">AddParameter</a>(std::shared_ptr&lt;DoubleParameter&gt;(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;GetName(),<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;getVal()*cos(<a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;getVal()), 0.1)));
<a name="l00195"></a>00195       <span class="keywordflow">if</span>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;hasError()) <span class="comment">//TODO: check bounds</span>
<a name="l00196"></a>00196         outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3574caceee6e2701f25327d35f7bce40" title="Add parameter via abstract pointer.">AddParameter</a>(std::shared_ptr&lt;DoubleParameter&gt;(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;GetName(),<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;getVal()*sin(<a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;getVal()), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;getMin(), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;getMax(), <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;getError())));
<a name="l00197"></a>00197       <span class="keywordflow">else</span>
<a name="l00198"></a>00198         outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3574caceee6e2701f25327d35f7bce40" title="Add parameter via abstract pointer.">AddParameter</a>(std::shared_ptr&lt;DoubleParameter&gt;(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;GetName(),<a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>[i]-&gt;getVal()*sin(<a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>[i]-&gt;getVal()), 0.1)));
<a name="l00199"></a>00199       <span class="comment">//outPar.AddParameter(DoubleParameter(phir[i]-&gt;getVal(), phir[i]-&gt;getMin(), phir[i]-&gt;getMax(), phir[i]-&gt;getError()));</span>
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201     <span class="comment">//outPar.AddParameter(DoubleParameter(rr[rr.size()-1]-&gt;getVal(), rr[rr.size()-1]-&gt;getMin(), rr[rr.size()-1]-&gt;getMax(), rr[rr.size()-1]-&gt;getError()));</span>
<a name="l00202"></a>00202     <span class="comment">//outPar.AddParameter(DoubleParameter(1.5, 0.5, 2.5, 0.1));</span>
<a name="l00203"></a>00203     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00204"></a>00204   }
<a name="l00205"></a>00205 
<a name="l00207"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a2268f6adef6c18d9827c7d6b2fe01d27">00207</a>   <span class="keyword">virtual</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a2268f6adef6c18d9827c7d6b2fe01d27">~AmpSum</a>(){
<a name="l00208"></a>00208 
<a name="l00209"></a>00209   }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211  <span class="keyword">protected</span>:
<a name="l00212"></a>00212 <span class="comment">//constants</span>
<a name="l00213"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">00213</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>; <span class="comment">// GeV/c (J/psi+)</span>
<a name="l00214"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ca73c35b84407835f08779332388c8a">00214</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ca73c35b84407835f08779332388c8a">Br</a>; <span class="comment">// GeV/c (width)</span>
<a name="l00215"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">00215</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>; <span class="comment">// GeV/c (gamma)</span>
<a name="l00216"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">00216</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>; <span class="comment">// GeV/c (pi)</span>
<a name="l00217"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">00217</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>; <span class="comment">// GeV/c (pi)</span>
<a name="l00218"></a>00218   <span class="comment">//const Double_t c = 299792458.; // m/s</span>
<a name="l00219"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#aa04a0555c52f0f5230307eab8b8a85cd">00219</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#aa04a0555c52f0f5230307eab8b8a85cd">PI</a>; <span class="comment">// m/s</span>
<a name="l00220"></a>00220 
<a name="l00221"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a8e2d39295bcb3225f4e27dae068832f1">00221</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a8e2d39295bcb3225f4e27dae068832f1">m23_sq_min</a>;
<a name="l00222"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a4e37da7be3e40946ec43793b769c2932">00222</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a4e37da7be3e40946ec43793b769c2932">m23_sq_max</a>;
<a name="l00223"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a729413d51b6a39f106e4e7b455f5f5a9">00223</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a729413d51b6a39f106e4e7b455f5f5a9">m13_sq_min</a>;
<a name="l00224"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a6074abf0ecc4479700c093aa5e0a06f0">00224</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a6074abf0ecc4479700c093aa5e0a06f0">m13_sq_max</a>;
<a name="l00225"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ad26634c8073119ecb51e23a976857b1d">00225</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad26634c8073119ecb51e23a976857b1d">m12_sq_min</a>;
<a name="l00226"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a603b7171b1b9bfb44ee2d59e4f3d81ec">00226</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a603b7171b1b9bfb44ee2d59e4f3d81ec">m12_sq_max</a>;
<a name="l00227"></a>00227 
<a name="l00228"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a537173084f103cdb461e4894f8ef44e0">00228</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a537173084f103cdb461e4894f8ef44e0">m23_min</a>;
<a name="l00229"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ab1aad32293f9b050787a25cf32e99f2c">00229</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab1aad32293f9b050787a25cf32e99f2c">m23_max</a>;
<a name="l00230"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a5a70a284f6076dff666178e1d83f8e29">00230</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5a70a284f6076dff666178e1d83f8e29">m13_min</a>;
<a name="l00231"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a7dc8139ae6ce82f828132fd123fa81b1">00231</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a7dc8139ae6ce82f828132fd123fa81b1">m13_max</a>;
<a name="l00232"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a240871c8a89229621dfd2a471afd6ba6">00232</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a240871c8a89229621dfd2a471afd6ba6">m12_min</a>;
<a name="l00233"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a9074793a552a714613ee9c5758595364">00233</a>   <span class="keyword">const</span> Double_t <a class="code" href="../../d9/dec/classAmpSum.xhtml#a9074793a552a714613ee9c5758595364">m12_max</a>;
<a name="l00234"></a>00234 
<a name="l00235"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a689ab4ec3dbbb34fc945d35a09e5005b">00235</a>   RooRealVar <a class="code" href="../../d9/dec/classAmpSum.xhtml#a689ab4ec3dbbb34fc945d35a09e5005b">ma</a>;
<a name="l00236"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8cd5dee4d6f9a07fc99cafd6ab21ef1">00236</a>   RooRealVar <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8cd5dee4d6f9a07fc99cafd6ab21ef1">mb</a>;
<a name="l00237"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#afdf567b134209e8a779eb9ff26f6f356">00237</a>   RooRealVar <a class="code" href="../../d9/dec/classAmpSum.xhtml#afdf567b134209e8a779eb9ff26f6f356">mc</a>;
<a name="l00238"></a>00238 
<a name="l00239"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a1799802d60c67ce209351878c14a659a">00239</a>   <a class="code" href="../../dc/d5e/classAmpSumOfAmplitudes.xhtml">AmpSumOfAmplitudes</a> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a1799802d60c67ce209351878c14a659a">totAmp</a>;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241   <span class="comment">//Resonance Variables</span>
<a name="l00242"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#aa82d04a79a1686e8d7ea6c2b1151be61">00242</a>   std::vector&lt;std::shared_ptr&lt;RooRealVar&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#aa82d04a79a1686e8d7ea6c2b1151be61">mr</a>;
<a name="l00243"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a0e413d110807856d1cffac48bb5ecc0d">00243</a>   std::vector&lt;std::shared_ptr&lt;RooRealVar&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#a0e413d110807856d1cffac48bb5ecc0d">qr</a>;
<a name="l00244"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a406bd19091e9931c444e1bedf9d80d00">00244</a>   std::vector&lt;std::shared_ptr&lt;RooRealVar&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#a406bd19091e9931c444e1bedf9d80d00">gr</a>;
<a name="l00245"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">00245</a>   std::vector&lt;std::shared_ptr&lt;RooRealVar&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#af12e2a49795adb2165b812524bbaf6d9">rr</a>;
<a name="l00246"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">00246</a>   std::vector&lt;std::shared_ptr&lt;RooRealVar&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad73a20b6c891dbac29e0069f9d3e62a6">phir</a>;
<a name="l00247"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a73a8ae0c015eff93d6884db24ad63323">00247</a>   std::vector&lt;std::shared_ptr&lt;RooRealVar&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#a73a8ae0c015eff93d6884db24ad63323">aj</a>;
<a name="l00248"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ee5deb0219b9cc30901f39462cd2285">00248</a>   std::vector&lt;std::shared_ptr&lt;RooRealVar&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5ee5deb0219b9cc30901f39462cd2285">am</a>;
<a name="l00249"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a9d38e42320601601cad6ea07c3a3904a">00249</a>   std::vector&lt;std::shared_ptr&lt;RooRealVar&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#a9d38e42320601601cad6ea07c3a3904a">an</a>;
<a name="l00250"></a>00250 
<a name="l00251"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fe113967edc8f1c75a9d10580550c76">00251</a>   std::vector&lt;std::shared_ptr&lt;AmpAbsDynamicalFunction&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#a6fe113967edc8f1c75a9d10580550c76">rbw</a>;
<a name="l00252"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ab34a22b8742c7a89bf085eda86ee9d42">00252</a>   std::vector&lt;std::shared_ptr&lt;AmpWigner&gt; &gt; <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab34a22b8742c7a89bf085eda86ee9d42">angd</a>;
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">00254</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> z){
<a name="l00255"></a>00255     <span class="keywordflow">return</span> x*x+y*y+z*z-2.*x*y-2.*x*z-2.*y*z;
<a name="l00256"></a>00256   }
<a name="l00257"></a>00257 
<a name="l00258"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a5fdc53509843bc24356c3627bd23888b">00258</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5fdc53509843bc24356c3627bd23888b">m13_sq_max_constr</a>(<span class="keywordtype">double</span> &amp;m23_sq){
<a name="l00259"></a>00259     <span class="keywordflow">return</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>+0.5/m23_sq*((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-m23_sq-<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>)*(m23_sq-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)+sqrt(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(m23_sq,<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>,<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>))*sqrt(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(m23_sq,<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>,m3*m3)));
<a name="l00260"></a>00260   }
<a name="l00261"></a>00261 
<a name="l00262"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ad5f0e84516104e0582021c1355995ffe">00262</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad5f0e84516104e0582021c1355995ffe">m13_sq_min_constr</a>(<span class="keywordtype">double</span> &amp;m23_sq){
<a name="l00263"></a>00263     <span class="keywordflow">return</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>+0.5/m23_sq*((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-m23_sq-<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>)*(m23_sq-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)-sqrt(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(m23_sq,<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>,<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>))*sqrt(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(m23_sq,<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>,m3*m3)));
<a name="l00264"></a>00264   }
<a name="l00265"></a>00265 
<a name="l00266"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#abd433a61c53cb658263c90828ca1fef0">00266</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#abd433a61c53cb658263c90828ca1fef0">m23_sq_max_constr</a>(<span class="keywordtype">double</span> &amp;m13_sq){
<a name="l00267"></a>00267     <span class="keywordflow">return</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>+0.5/m13_sq*((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-m13_sq-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>)*(m13_sq-<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)+sqrt(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(m13_sq,<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>,<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>))*sqrt(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(m13_sq,<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>,m3*m3)));
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269 
<a name="l00270"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8993b3076806df07ad9d3cf3501fcc7">00270</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8993b3076806df07ad9d3cf3501fcc7">m23_sq_min_constr</a>(<span class="keywordtype">double</span> &amp;m13_sq){
<a name="l00271"></a>00271     <span class="keywordflow">return</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>+0.5/m13_sq*((<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>-m13_sq-<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>)*(m13_sq-<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>+<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#ab17b22f3098c56ba22f9ae875cdd54f5">m3</a>)-sqrt(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(m13_sq,<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a9091521489afbcdd823a30cd6f9993ac">M</a>,<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#a468c24af779844a27dc8f454d2c2f050">m2</a>))*sqrt(<a class="code" href="../../d9/dec/classAmpSum.xhtml#aba00f9ad01aaa3e9030bb183e309d3a9">lambda</a>(m13_sq,<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>*<a class="code" href="../../d9/dec/classAmpSum.xhtml#aca647077fd097feee3c31f0960fb89b9">m1</a>,m3*m3)));
<a name="l00272"></a>00272   }
<a name="l00273"></a>00273 
<a name="l00274"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a7793f3fd94c86b6818b03a95bb444721">00274</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a7793f3fd94c86b6818b03a95bb444721">mb_sq_max_constr</a>(<span class="keywordtype">double</span> &amp;ma_sq){
<a name="l00275"></a>00275     <span class="keywordflow">return</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a5fdc53509843bc24356c3627bd23888b">m13_sq_max_constr</a>(ma_sq);
<a name="l00276"></a>00276   }
<a name="l00277"></a>00277 
<a name="l00278"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a7eb9ca2f8ac950bd7105d276b578ff4a">00278</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a7eb9ca2f8ac950bd7105d276b578ff4a">mb_sq_min_constr</a>(<span class="keywordtype">double</span> &amp;ma_sq){
<a name="l00279"></a>00279     <span class="keywordflow">return</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#ad5f0e84516104e0582021c1355995ffe">m13_sq_min_constr</a>(ma_sq);
<a name="l00280"></a>00280   }
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#a716c0394de9bf0949302598977869c25">00282</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#a716c0394de9bf0949302598977869c25">ma_sq_max_constr</a>(<span class="keywordtype">double</span> &amp;mb_sq){
<a name="l00283"></a>00283     <span class="keywordflow">return</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#abd433a61c53cb658263c90828ca1fef0">m23_sq_max_constr</a>(mb_sq);
<a name="l00284"></a>00284   }
<a name="l00285"></a>00285 
<a name="l00286"></a><a class="code" href="../../d9/dec/classAmpSum.xhtml#ab81027126e53cb8a5b141e04482fe670">00286</a>   <span class="keywordtype">double</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab81027126e53cb8a5b141e04482fe670">ma_sq_min_constr</a>(<span class="keywordtype">double</span> &amp;mb_sq){
<a name="l00287"></a>00287     <span class="keywordflow">return</span> <a class="code" href="../../d9/dec/classAmpSum.xhtml#ab8993b3076806df07ad9d3cf3501fcc7">m23_sq_min_constr</a>(mb_sq);
<a name="l00288"></a>00288   }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291  <span class="keyword">private</span>:
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 };
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml">00296</a> <span class="keyword">class </span><a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml">AmpSumStrategy</a> : <span class="keyword">public</span> <a class="code" href="../../d2/df2/classStrategy.xhtml" title="Functions to be used in FuntionTree.">Strategy</a> {
<a name="l00297"></a>00297 <span class="keyword">public</span>:
<a name="l00298"></a><a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#a9c3fbcd619cbf70aa387a571affd6f51">00298</a>   <a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#a9c3fbcd619cbf70aa387a571affd6f51">AmpSumStrategy</a>(std::shared_ptr&lt;AmpSum&gt; amplitude):<a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#a1ec7b30fd6346cd4fa8f400d99c3ec1b">_amplitude</a>(amplitude){
<a name="l00299"></a>00299     ;
<a name="l00300"></a>00300   }
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#ac7c84baee8966517ac98b3971d38059d">00302</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> std::string <a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#ac7c84baee8966517ac98b3971d38059d" title="Pure Virtual interface for streaming info about the strategy.">to_str</a>()<span class="keyword"> const </span>{
<a name="l00303"></a>00303     <span class="keywordflow">return</span> <span class="stringliteral">&quot;AmpSumOfAmplitudesComplete&quot;</span>;
<a name="l00304"></a>00304   }
<a name="l00305"></a>00305 
<a name="l00306"></a><a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#ad44110abd16033ee8aa7fba6f0070276">00306</a>   <span class="keyword">virtual</span> std::shared_ptr&lt;AbsParameter&gt; <a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#ad44110abd16033ee8aa7fba6f0070276" title="Pure Virtual interface for executing a function.">execute</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a>&amp; paras) {
<a name="l00307"></a>00307     std::shared_ptr&lt;DoubleParameter&gt; amp(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<span class="stringliteral">&quot;AmpSumOfAmplitudesComplete&quot;</span>));
<a name="l00308"></a>00308     std::vector&lt;double&gt; x;
<a name="l00309"></a>00309     x.push_back(paras.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a99c664620aa97bc31d1defcf7ab4c927" title="Getter for parameter value.">GetParameterValue</a>(<span class="stringliteral">&quot;ma&quot;</span>));
<a name="l00310"></a>00310     x.push_back(paras.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a99c664620aa97bc31d1defcf7ab4c927" title="Getter for parameter value.">GetParameterValue</a>(<span class="stringliteral">&quot;mb&quot;</span>));
<a name="l00311"></a>00311     x.push_back(paras.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a99c664620aa97bc31d1defcf7ab4c927" title="Getter for parameter value.">GetParameterValue</a>(<span class="stringliteral">&quot;mc&quot;</span>));
<a name="l00312"></a>00312     <a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a> par(paras);
<a name="l00313"></a>00313     par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#ac38ce5a2a0110de70fb2b264b8e7f6d2" title="Remove floating point parameter.">RemoveDouble</a>(<span class="stringliteral">&quot;ma&quot;</span>); par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#ac38ce5a2a0110de70fb2b264b8e7f6d2" title="Remove floating point parameter.">RemoveDouble</a>(<span class="stringliteral">&quot;mb&quot;</span>); par.<a class="code" href="../../d1/d9d/classParameterList.xhtml#ac38ce5a2a0110de70fb2b264b8e7f6d2" title="Remove floating point parameter.">RemoveDouble</a>(<span class="stringliteral">&quot;mc&quot;</span>);
<a name="l00314"></a>00314     amp-&gt;SetValue(<a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#a1ec7b30fd6346cd4fa8f400d99c3ec1b">_amplitude</a>-&gt;intensity(x, par));
<a name="l00315"></a>00315     <span class="keywordflow">return</span> amp;
<a name="l00316"></a>00316   }
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 <span class="keyword">protected</span>:
<a name="l00319"></a><a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#a1ec7b30fd6346cd4fa8f400d99c3ec1b">00319</a>   std::shared_ptr&lt;AmpSum&gt; <a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml#a1ec7b30fd6346cd4fa8f400d99c3ec1b">_amplitude</a>;
<a name="l00320"></a>00320 };
<a name="l00321"></a>00321 
<a name="l00322"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml">00322</a> <span class="keyword">class </span><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml">AmpSumIntensity</a> : <span class="keyword">public</span> <a class="code" href="../../d9/d3e/classAmplitude.xhtml" title="Physics Interface Base-Class.">Amplitude</a> {
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 <span class="keyword">public</span>:
<a name="l00326"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#abf5de602d6f8960805a105036754cb48">00326</a>   <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#abf5de602d6f8960805a105036754cb48" title="Default Constructor (0x0)">AmpSumIntensity</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> inM, <span class="keyword">const</span> <span class="keywordtype">double</span> inBr, <span class="keyword">const</span> <span class="keywordtype">double</span> in1
<a name="l00327"></a>00327       ,<span class="keyword">const</span> <span class="keywordtype">double</span> in2, <span class="keyword">const</span> <span class="keywordtype">double</span> in3, <a class="code" href="../../dc/d3a/classAmplitudeSetup.xhtml" title="This class is used to load an Amplitude configuration provided in an XML file.">AmplitudeSetup</a> ini)
<a name="l00328"></a>00328   : <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">totAmp</a>(new <a class="code" href="../../d9/dec/classAmpSum.xhtml">AmpSum</a>(inM, inBr, in1, in2, in3, ini)){
<a name="l00329"></a>00329 
<a name="l00330"></a>00330   }
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#ac1132d6a2220a4e82d8c108e2029ddf1">00332</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#ac1132d6a2220a4e82d8c108e2029ddf1">integral</a>(<a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a>&amp; par){
<a name="l00333"></a>00333     <span class="keywordflow">return</span> <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">totAmp</a>-&gt;integral(par);
<a name="l00334"></a>00334   }
<a name="l00335"></a>00335 
<a name="l00336"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#abd4492f1f13c383bed9a1b988f1c182a">00336</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#abd4492f1f13c383bed9a1b988f1c182a">volume</a>(){
<a name="l00337"></a>00337     <span class="keywordflow">return</span> <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">totAmp</a>-&gt;volume();
<a name="l00338"></a>00338   }
<a name="l00339"></a>00339 
<a name="l00340"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a3ced9c149deae4375c6cb458377717b0">00340</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a> <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a3ced9c149deae4375c6cb458377717b0">intensity</a>(std::vector&lt;double&gt;&amp; x, <a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a>&amp; par){
<a name="l00341"></a>00341     <a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a> result;
<a name="l00342"></a>00342     result.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3574caceee6e2701f25327d35f7bce40" title="Add parameter via abstract pointer.">AddParameter</a>(std::shared_ptr&lt;DoubleParameter&gt;(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<span class="stringliteral">&quot;AmpSumResult&quot;</span>,<a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">totAmp</a>-&gt;intensity(x, par))));
<a name="l00343"></a>00343     <span class="keywordflow">return</span> result;
<a name="l00344"></a>00344   }
<a name="l00345"></a>00345 
<a name="l00346"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a45fb28709211222aa13fd4722996975f">00346</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a45fb28709211222aa13fd4722996975f">fillStartParVec</a>(<a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a>&amp; outPar){
<a name="l00347"></a>00347     <span class="keywordflow">return</span> <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">totAmp</a>-&gt;fillStartParVec(outPar);
<a name="l00348"></a>00348   }
<a name="l00349"></a>00349 
<a name="l00350"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a990ac16c109a6846387bf55f75e9e018">00350</a>   <span class="keyword">virtual</span> std::shared_ptr&lt;FunctionTree&gt; <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a990ac16c109a6846387bf55f75e9e018">functionTree</a>(<a class="code" href="../../d1/d9d/classParameterList.xhtml" title="Internal container representing a parameter list.">ParameterList</a>&amp; outPar) {
<a name="l00351"></a>00351     <span class="keywordflow">if</span>(outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#aa626799b903b16e7f6f29f918c626f9e" title="Getter for number of double parameter.">GetNDouble</a>()&gt;0) <span class="keywordflow">return</span> NULL;
<a name="l00352"></a>00352     std::shared_ptr&lt;FunctionTree&gt; myTree;
<a name="l00353"></a>00353     <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">totAmp</a>-&gt;fillStartParVec(outPar);
<a name="l00354"></a>00354     outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3574caceee6e2701f25327d35f7bce40" title="Add parameter via abstract pointer.">AddParameter</a>(std::shared_ptr&lt;DoubleParameter&gt;(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<span class="stringliteral">&quot;ma&quot;</span>,0)));
<a name="l00355"></a>00355     outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3574caceee6e2701f25327d35f7bce40" title="Add parameter via abstract pointer.">AddParameter</a>(std::shared_ptr&lt;DoubleParameter&gt;(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<span class="stringliteral">&quot;mb&quot;</span>,0)));
<a name="l00356"></a>00356     outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a3574caceee6e2701f25327d35f7bce40" title="Add parameter via abstract pointer.">AddParameter</a>(std::shared_ptr&lt;DoubleParameter&gt;(<span class="keyword">new</span> <a class="code" href="../../dd/d8d/classDoubleParameter.xhtml" title="Implementations for internal parameter.">DoubleParameter</a>(<span class="stringliteral">&quot;mc&quot;</span>,0)));
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     std::shared_ptr&lt;Strategy&gt; ampSumComplete = std::shared_ptr&lt;Strategy&gt;(<span class="keyword">new</span> <a class="code" href="../../da/d9e/classAmpSumStrategy.xhtml">AmpSumStrategy</a>(<a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">totAmp</a>));
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     myTree = std::shared_ptr&lt;FunctionTree&gt;(<span class="keyword">new</span> <a class="code" href="../../db/d4e/classFunctionTree.xhtml" title="FunctionTree for the actual Optimization.">FunctionTree</a>());
<a name="l00361"></a>00361     myTree-&gt;createHead(<span class="stringliteral">&quot;totAmp&quot;</span>, ampSumComplete);
<a name="l00362"></a>00362     <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#aa626799b903b16e7f6f29f918c626f9e" title="Getter for number of double parameter.">GetNDouble</a>(); i++){
<a name="l00363"></a>00363       std::shared_ptr&lt;DoubleParameter&gt; tmp = outPar.<a class="code" href="../../d1/d9d/classParameterList.xhtml#a60d49f17af8b63f4f153f9d420c3bcbb" title="Getter for floating point parameter.">GetDoubleParameter</a>(i);
<a name="l00364"></a>00364       myTree-&gt;createLeaf(tmp-&gt;GetName(), tmp, <span class="stringliteral">&quot;totAmp&quot;</span>);
<a name="l00365"></a>00365     }
<a name="l00366"></a>00366    <span class="comment">// myTree-&gt;createLeaf(&quot;b&quot;, parB, &quot;bcd&quot;);</span>
<a name="l00367"></a>00367     <span class="comment">//myTree-&gt;createLeaf(&quot;c&quot;, parC, &quot;cd&quot;);</span>
<a name="l00368"></a>00368     <span class="comment">//myTree-&gt;createLeaf(&quot;d&quot;, parD, &quot;cd&quot;);</span>
<a name="l00369"></a>00369 
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     <span class="keywordflow">return</span> myTree;
<a name="l00372"></a>00372   }
<a name="l00373"></a>00373 
<a name="l00375"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a7f9349a58a68064b2946da08a09a50ad">00375</a>   <span class="keyword">virtual</span> <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a7f9349a58a68064b2946da08a09a50ad">~AmpSumIntensity</a>(){
<a name="l00376"></a>00376 
<a name="l00377"></a>00377   }
<a name="l00378"></a>00378 
<a name="l00379"></a>00379  <span class="keyword">protected</span>:
<a name="l00380"></a><a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">00380</a>   std::shared_ptr&lt;AmpSum&gt; <a class="code" href="../../de/dda/classAmpSumIntensity.xhtml#a15dd57d86ffe4216d299731f608f597d">totAmp</a>;
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 };
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Oct 24 2013 for ComPWA by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
